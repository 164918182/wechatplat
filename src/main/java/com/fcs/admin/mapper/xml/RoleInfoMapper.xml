<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.fcs.admin.mapper.RoleInfoMapper">
    <resultMap id="BaseResultMap" type="com.fcs.admin.model.RoleInfo">
        <id column="id" property="id" jdbcType="VARCHAR" />
        <result column="name" property="name" jdbcType="VARCHAR" />
        <result column="des" property="des" jdbcType="VARCHAR" />
        <result column="enabled" property="enabled" jdbcType="INTEGER" />
        <result column="createTime" property="createTime" jdbcType="DATE" />
        <result column="updateTime" property="updateTime" jdbcType="DATE" />
        <result column="sn" property="sn" jdbcType="INTEGER" />
    </resultMap>
    <sql id="Base_Column_List">
        id,name,des
    </sql>

    <!--<select id="selectMenuByUserId" resultType="com.fcs.admin.model.RoleInfo">-->
        <!--SELECT id, text, url, iconCls FROM menutree menu RIGHT JOIN-->
        <!--(SELECT DISTINCT rp.perid FROM role_per rp WHERE EXISTS (-->
        <!--SELECT 1 FROM user_role ur WHERE ur.userid=#{userId} AND rp.roleid=ur.roleid )) a ON menu.id=a.perid-->
        <!--WHERE menu.parentId = #{pid}  ORDER BY sn-->
    <!--</select>-->

    <select id="getRoleList" resultType="com.fcs.admin.model.RoleInfo">
        SELECT id,name,des
        FROM role_info role
        WHERE role.enabled = 1  ORDER BY role.sn
    </select>

    <insert id="addRole" parameterType="com.fcs.admin.model.RoleInfo">
       insert into role_info (id,name,des,createTime,updateTime)
        values
      (#{id},#{name},#{des},#{createTime},#{updateTime})
    </insert>


    <insert id="addRoleAndPer" >
        insert into role_per (id,roleid,perid)
        values
        (#{id},#{roleId},#{perId})
    </insert>


    <!--<select id="selectAllByUserId" resultType="Permission">-->
        <!--SELECT id, title, url, permCode, icon FROM permission p RIGHT JOIN-->
        <!--(SELECT DISTINCT r.pid FROM role_permission r WHERE EXISTS (-->
        <!--SELECT 1 FROM user_role u WHERE u.uid=#{userId} AND r.rid=u.rid )) a ON p.id=a.pid-->
    <!--</select> -->
    <!--<select id="buildMenuTree" resultMap="BaseResultMap" parameterType="java.lang.String">-->
        <!--select-->
        <!--<include refid="Base_Column_List" />-->
        <!--from manage_menuTree-->
        <!--where enabled=0 and parentId = #{id,jdbcType=VARCHAR}-->
    <!--</select>-->

     <!--<insert id="saveMenu" parameterType="com.fcs.menu.model.MenuTree">-->
        <!--insert into manage_menutree (id,text,url,parentId,createTime,updateTime)-->
        <!--values-->
          <!--(#{id},#{text},#{url},#{parentId},#{createTime},#{updateTime})-->
    <!--</insert>-->

    <!--<update id="delMenu" parameterType="java.lang.String">-->
        <!--update manage_menutree set-->
        <!--enabled = ${@com.fcs.common.GlobalStatic@ENABLED_FALSE}-->
        <!--where id = #{id}-->
    <!--</update>-->

    <!--<update id="editMenu" parameterType="com.fcs.menu.model.MenuTree">-->
        <!--update manage_menutree set-->
        <!--text = #{text},-->
        <!--url = #{url},-->
        <!--updateTime = #{updateTime}-->
        <!--where id = #{id}-->
    <!--</update>-->
    <!--<resultMap type="com.fcs.menu.model.MenuTree" id="MenuTreeMap"-->
               <!--extends="BaseResultMap">-->
        <!--<collection property="courseInfos" javaType="ArrayList"-->
                    <!--ofType="com.fcs.user.model.CourseInfo">-->
            <!--<id property="id" column="course_id" jdbcType="INTEGER" />-->
            <!--<result property="cname" column="cname" jdbcType="VARCHAR" />-->
            <!--<result property="caddress" column="caddress" jdbcType="VARCHAR" />-->
        <!--</collection>-->
    <!--</resultMap>-->
    <!--<delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">-->
        <!--delete from-->
        <!--user_info-->
        <!--where id = #{id,jdbcType=INTEGER}-->
    <!--</delete>-->
    <!--<insert id="insert" parameterType="com.fcs.user.model.UserInfo">-->
        <!--insert into user_info (id,-->
        <!--uname, unumber-->
        <!--)-->
        <!--values (#{id,jdbcType=INTEGER},-->
        <!--#{uname,jdbcType=VARCHAR},-->
        <!--#{unumber,jdbcType=INTEGER}-->
        <!--)-->
    <!--</insert>-->
    <!--<insert id="insertSelective" parameterType="com.fcs.user.model.UserInfo">-->
        <!--insert into user_info-->
        <!--<trim prefix="(" suffix=")" suffixOverrides=",">-->
            <!--<if test="id != null">-->
                <!--id,-->
            <!--</if>-->
            <!--<if test="uname != null">-->
                <!--uname,-->
            <!--</if>-->
            <!--<if test="unumber != null">-->
                <!--unumber,-->
            <!--</if>-->
        <!--</trim>-->
        <!--<trim prefix="values (" suffix=")" suffixOverrides=",">-->
            <!--<if test="id != null">-->
                <!--#{id,jdbcType=INTEGER},-->
            <!--</if>-->
            <!--<if test="uname != null">-->
                <!--#{uname,jdbcType=VARCHAR},-->
            <!--</if>-->
            <!--<if test="unumber != null">-->
                <!--#{unumber,jdbcType=INTEGER},-->
            <!--</if>-->
        <!--</trim>-->
    <!--</insert>-->
    <!--<update id="updateByPrimaryKeySelective" parameterType="com.fcs.user.model.UserInfo">-->
        <!--update user_info-->
        <!--<set>-->
            <!--<if test="uname != null">-->
                <!--uname = #{uname,jdbcType=VARCHAR},-->
            <!--</if>-->
            <!--<if test="unumber != null">-->
                <!--unumber = #{unumber,jdbcType=INTEGER},-->
            <!--</if>-->
        <!--</set>-->
        <!--where id = #{id,jdbcType=INTEGER}-->
    <!--</update>-->
    <!--<update id="updateByPrimaryKey" parameterType="com.fcs.user.model.UserInfo">-->
        <!--update user_info-->
        <!--set uname = #{uname,jdbcType=VARCHAR},-->
        <!--unumber =-->
        <!--#{unumber,jdbcType=INTEGER}-->
        <!--where id = #{id,jdbcType=INTEGER}-->
    <!--</update>-->

    <!--<resultMap type="com.fcs.user.model.UserInfo" id="UserCourseMap"-->
               <!--extends="BaseResultMap">-->
        <!--<collection property="courseInfos" javaType="list"-->
                    <!--ofType="com.fcs.user.model.CourseInfo">-->
            <!--<id property="id" column="course_id" jdbcType="INTEGER" />-->
            <!--<result property="cname" column="cname" jdbcType="VARCHAR" />-->
            <!--<result property="caddress" column="caddress" jdbcType="VARCHAR" />-->
        <!--</collection>-->


    <!--</resultMap>-->
    <!--<select id="selectAll" resultMap="UserCourseMap">-->
        <!--select u.id, u.uname,-->
        <!--u.unumber, c.id course_id, c.cname, c.caddress from user_info u left-->
        <!--join course_user_info cu on u.id = cu.uid-->
        <!--left join course_info c on-->
        <!--cu.cid = c.id-->
    <!--</select>-->
</mapper>